@model Bloggie.Web.Models.User.User

@{
    ViewData["Title"] = "CREATE USER";
}


@* <h1 class="bg-info text-white">Create User</h1>
<div asp-validation-summary="ModelOnly" class="text-danger"></div>

<form method="post">
    <div class="form-group">
        <label asp-for="Firstname"></label>
        <input asp-for="Firstname" class="form-control" />
        <span class="text-danger" asp-validation-for="Firstname"></span>
    </div>
    <div class="form-group">
        <label asp-for="Lastname"></label>
        <input asp-for="Lastname" class="form-control" />
        <span class="text-danger" asp-validation-for="Lastname"></span>
    </div>
    <div class="form-group">
        <label asp-for="Username"></label>
        <input asp-for="Username" class="form-control" />
        <span class="text-danger" asp-validation-for="Username"></span>
    </div>
    <div class="form-group">
        <label asp-for="PhoneNumber"></label>
        <input asp-for="PhoneNumber" class="form-control" />
        <span class="text-danger" asp-validation-for="PhoneNumber"></span>
    </div>
    <div class="form-group">
        <label asp-for="Email"></label>
        <input asp-for="Email" class="form-control" />
        <span class="text-danger" asp-validation-for="Email"></span>
    </div>
    <div class="form-group">
        <label asp-for="Password"></label>
        <input type="password" asp-for="Password" class="form-control" required minlength="6" />
        <span class="text-danger" asp-validation-for="Password"></span>
    </div>

    <div class="mt-2">
        <button type="submit" class="btn btn-success">Register</button>
        <a class="btn btn-primary"
           asp-area=""
           asp-controller="Admin"
           asp-action="LogIn">Login</a>
</div>

    
</form> *@


<style>
    body {
        background: #222D32;
        font-family: 'Roboto', sans-serif;
    }

    .login-box {
        margin-top: 75px;
        height: auto;
        background: #1A2226;
        text-align: center;
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
    }

    .login-key {
        height: 100px;
        font-size: 80px;
        line-height: 100px;
        background: -webkit-linear-gradient(#27EF9F, #0DB8DE);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .login-title {
        margin-top: 15px;
        text-align: center;
        font-size: 30px;
        letter-spacing: 2px;
        margin-top: 15px;
        font-weight: bold;
        color: #ECF0F5;
    }

    .login-form {
        margin-top: 25px;
        text-align: left;
    }

    input[type=text] {
        background-color: #1A2226;
        border: none;
        border-bottom: 2px solid #0DB8DE;
        border-top: 0px;
        border-radius: 0px;
        font-weight: bold;
        outline: 0;
        margin-bottom: 20px;
        padding-left: 0px;
        color: #ECF0F5;
    }

    input[type=password] {
        background-color: #1A2226;
        border: none;
        border-bottom: 2px solid #0DB8DE;
        border-top: 0px;
        border-radius: 0px;
        font-weight: bold;
        outline: 0;
        padding-left: 0px;
        margin-bottom: 20px;
        color: #ECF0F5;
    }

    .form-group {
        margin-bottom: 40px;
        outline: 0px;
    }

    .form-control:focus {
        border-color: inherit;
        -webkit-box-shadow: none;
        box-shadow: none;
        border-bottom: 2px solid #0DB8DE;
        outline: 0;
        background-color: #1A2226;
        color: #ECF0F5;
    }

    input:focus {
        outline: none;
        box-shadow: 0 0 0;
    }

    label {
        margin-bottom: 0px;
    }

    .form-control-label {
        font-size: 10px;
        color: #6C6C6C;
        font-weight: bold;
        letter-spacing: 1px;
    }

    .btn-outline-primary {
        border-color: #0DB8DE;
        color: #0DB8DE;
        border-radius: 0px;
        font-weight: bold;
        letter-spacing: 1px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
    }

        .btn-outline-primary:hover {
            background-color: #0DB8DE;
            right: 0px;
        }

    .login-btm {
        float: left;
    }

    .login-button {
        padding-right: 0px;
        text-align: right;
        margin-bottom: 25px;
    }

    .login-text {
        text-align: left;
        padding-left: 0px;
        color: #A2A4A4;
    }

    .loginbttm {
        padding: 0px;
    }
</style>


<div class="container">
    <div class="row">
        <div class="col-lg-3 col-md-2"></div>
        <div class="col-lg-6 col-md-8 login-box">
            <div class="col-lg-12 login-key">
                <i class="fa fa-key" aria-hidden="true"></i>
            </div>
            <div class="col-lg-12 login-title">
                Register PANEL
            </div>
            <form  method="post" id="regForm">
               
                <div class="col-lg-12 login-form">
                    <div class="col-lg-12 login-form">


                        <div class="form-group">
                            <label name="Firstname" asp-for="Firstname" class="form-control-label"></label>
                            <input name"Firstname" onchange="fnameChange(event)" asp-for="Firstname" class="form-control" id="Firstname" />
                            <span class="text-danger" id="FirstnameError" ></span>
                        
                        </div>
                        <div class="form-group">
                            <label name= asp-for="Lastname" class="form-control-label"></label>
                            <input onchange="LnameChange(event)" asp-for="Lastname" class="form-control" id="Lastname" />
                            <span class="text-danger"id="LastnameError" ></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="Username" class="form-control-label"></label>
                            <input onchange="usernameChange(event)" asp-for="Username" class="form-control" id="Username" />
                            <span class="text-danger"id="UsernameError" ></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="PhoneNumber" class="form-control-label"></label>
                            <input onchange="phoneChange(event)" asp-for="PhoneNumber" class="form-control" id="PhoneNumber" />
                            <span class="text-danger" id="PhoneNumberError" ></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="Email" class="form-control-label"></label>
                            <input onchange="emailChange(event)" asp-for="Email" class="form-control" id="Email" />
                            <span class="text-danger" id="EmailError" ></span>\
                            <span class="text-danger" id="EmptyEmailError"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="Password" class="form-control-label"></label>
                            <input onchange="passwordChange(event)" type="password" asp-for="Password" class="form-control" required minlength="6" id="Password" />
                            <span class="text-danger" id="PasswordError" ></span>
                        </div>
                        <div class="text-danger" asp-validation-summary="ModelOnly"></div>
                        <div class="col-lg-12 loginbttm">
                            <div class="col-lg-6 login-btm login-text">
                            </div>
                            <div class="col-lg-6 login-btm login-button">
                                <button type="submit" onclick="btnClick()" class="btn btn-success" id="register">Register</button>
                                <a class="btn btn-primary"
                                   asp-area=""
                                   asp-controller="Admin"
                                   asp-action="LogIn">Login</a>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="col-lg-3 col-md-2"></div>
            </form>
        </div>
    </div>
</div>>

@section scripts {
    @* <partial name="_ValidationScriptsPartial"/>*@
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
   }


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

   <script>

    $(document).ready(function () {
        $("#regForm").validate({
            rules: {
                UserName: {
                    required: true
                },
                Password: {
                    required: true
                }
            },
            messages: {
                UserName: {
                    required: "User name is required"
                },
                Password: {
                    required: "Password is required"
                }
            },
            submitHandler: function (form) {
                $.ajax({
                    url: "/Admin/Login",
                    type: "POST",
                    data: $(form).serialize(),
                    success: function (response) {
                        $('#regForm').html("Your form was submitted!");
                    }
                });
                $form.submit();
            }

        });
    });




























       function btnClick() {
        var fname = $("#Firstname").val();
        var lname = $("#Lastname").val();
        var Uname = $("#Username").val();
        var phone = $("#PhoneNumber").val();
        var email = $("#Email").val();
        var passwrd = $("#Password").val

        var obj = {
            Firstname : fname,
            Lastname : lname,
            Username : uname,
            Email : email,
            PhoneNumber : phone,
            Password : passwrd
        }
           register(obj);
       }

       function register(obj) { 
           $.ajax({
               url:"/Admin/Create",
               method:"POST",
               data : obj,
               success: function (data) {
                   data = JSON.parse(data);
                   console.log("data", data);
               }
               error : function(error){
                   console.log("error" , error)
               }

           })
       }




















    const form = document.getElementById('regForm');
    const fname = document.getElementById("Firstname");
    const lname = document.getElementById("Lastname");

    const uname = document.getElementById("Username");
    const phone = document.getElementById("PhoneNumber");
    const eml = document.getElementById("Email");
    const pswd = document.getElementById("Password");

    form.addEventListener('submit', function (e) {

        var re = /^([\w-\.]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
     if(fname.value =="")
     {
            e.preventDefault();

            document.getElementById("FirstnameError").innerHTML = "Please Enter First name"
      }
      else{
            document.getElementById("FirstnameError").innerHTML = ""
      }
        if (lname.value == "") {
            e.preventDefault();

            document.getElementById("LastnameError").innerHTML = "Please Enter Last name"
        }
        else{
            document.getElementById("LastnameError").innerHTML = ""
        }
        if (uname.value == "") {
            e.preventDefault();

            document.getElementById("UsernameError").innerHTML = "Please Enter User name"
        }
        else {
            document.getElementById("UsernameError").innerHTML = ""
        }
        if (uname.value == "") {
            e.preventDefault();

            document.getElementById("UsernameError").innerHTML = "Please Enter User name"
        }
        else {
            document.getElementById("UsernameError").innerHTML = ""
        }
        if (phone.value == "") {
            document.getElementById("PhoneNumberError").innerHTML = "Please Enter Phone number"
        }
        else {
            document.getElementById("PhoneNumberError").innerHTML = ""
        }

        if (eml.value == "" || eml.value !== "" && !re.test(eml.value)) {
            console.log("non empty email")
            e.preventDefault();

            document.getElementById("EmptyEmailError").innerHTML = "Please EnterValid Email"
        }
        else {
            document.getElementById("EmptyEmailError").innerHTML = ""
        }
        if (pswd.value == "") {
            e.preventDefault();

            document.getElementById("PasswordError").innerHTML = "Please Enter Password"
        }
        else {
            document.getElementById("PasswordError").innerHTML = ""
        }
      
    });
    
    function fnameChange(event)
    {
        if(event.target.value == "")
        {
            document.getElementById("FirstnameError").innerHTML = "Please Enter First name"
        }
        else{
            document.getElementById("FirstnameError").innerHTML = ""
        }
    }

    function LnameChange(event) {
        if (event.target.value == "") {
            document.getElementById("LastnameError").innerHTML = "Please Enter Last name"
        }
        else {
            document.getElementById("LastnameError").innerHTML = ""
        }
    }

    function usernameChange(event) {
        if (event.target.value == "") {
            document.getElementById("UsernameError").innerHTML = "Please Enter User name"
        }
        else {
            document.getElementById("UsernameError").innerHTML = ""
        }
    }

    function phoneChange(event) {
        if (event.target.value == "") {
            document.getElementById("PhoneNumberError").innerHTML = "Please Enter Phone Number"
        }
        else {
            document.getElementById("PhoneNumberError").innerHTML = ""
        }
    }

    function emailChange(event) {
        if (event.target.value == "") {
            document.getElementById("EmailError").innerHTML = "Please Enter Email"
        }
        else {
            document.getElementById("EmailError").innerHTML = ""
        }
    }

    function passwordChange(event) {
        if (event.target.value == "") {
            document.getElementById("PasswordError").innerHTML = "Please Enter Password"
        }
        else {
            document.getElementById("PasswordError").innerHTML = ""
        }
    }



</script>

